<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security5"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
  <title th:text="${title} ?: 'Product'">Product</title>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet"
          href="../static/css/style.css">
</head>
<body>
<section layout:fragment="content" class="mb-6">
<!--  <h1>Products List</h1>-->
<!--  <div>-->
<!--    <a th:href="@{/products/add}" class="btn btn-info mb-4">Add New-->
<!--      Product</a>-->
<!--  </div>-->
<!--  <table class="table table-bordered table-hover">-->
<!--    <thead class="table-dark">-->
<!--    <tr>-->
<!--      <th>ID</th>-->
<!--      <th>Name</th>-->
<!--      <th>Price</th>-->
<!--      <th>Description</th>-->
<!--      <th>Image</th>-->
<!--      <th>Category Name</th>-->
<!--      <th>Actions</th>-->
<!--      <th>Add To Cart</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody>-->
<!--    <tr th:each="product : ${products}">-->
<!--      <td th:text="${product.id}"></td>-->
<!--      <td th:text="${product.name}"></td>-->
<!--      <td th:text="${product.price}"></td>-->
<!--      <td th:text="${product.description}"></td>-->
<!--&lt;!&ndash;      <td>&ndash;&gt;-->
<!--&lt;!&ndash;        <img th:src="@{${product.image}}" alt="product image" style="max-width:100px; max-height:100px;"/>&ndash;&gt;-->
<!--&lt;!&ndash;      </td>&ndash;&gt;-->

<!--&lt;!&ndash;      <td>&ndash;&gt;-->
<!--&lt;!&ndash;        <div th:each="imageUrl : ${product.image}">&ndash;&gt;-->
<!--&lt;!&ndash;          <img th:src="@{${imageUrl}}" alt="product image" style="max-width:100px; max-height:100px; margin-right: 10px;"/>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;      </td>&ndash;&gt;-->
<!--      <td style="width:200px;height:150px;">-->
<!--        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" data-bs-interval="2000">-->
<!--&lt;!&ndash;          <ol class="carousel-indicators">&ndash;&gt;-->
<!--&lt;!&ndash;            <li th:each="imageUrl, stat : ${product.image}" data-target="#carouselExampleIndicators"&ndash;&gt;-->
<!--&lt;!&ndash;                th:attr="data-slide-to=${stat.index}" th:class="${stat.index == 0} ? 'active'">&ndash;&gt;-->
<!--&lt;!&ndash;            </li>&ndash;&gt;-->
<!--&lt;!&ndash;          </ol>&ndash;&gt;-->
<!--          <div class="carousel-inner">-->
<!--              <div th:each="imageUrl, stat : ${product.image}" th:class="${stat.index == 0} ? 'carousel-item active' : 'carousel-item'">-->
<!--                  <img th:src="@{${imageUrl}}" class="d-block w-100" alt="product image" style="max-width:100px; max-height:100px;"/>-->
<!--              </div>-->
<!--          </div>-->
<!--        </div>-->
<!--      </td>-->

<!--      <td th:text="${product.category.name}"></td>-->
<!--      <td>-->
<!--          &lt;!&ndash; Hiển thị nút sửa và xóa chỉ dành cho người dùng ADMIN &ndash;&gt;-->
<!--          <div sec:authorize="hasAuthority('ADMIN')">-->
<!--              <a th:href="@{/products/edit/{id}(id=${product.id})}"-->
<!--                 class="btn btn-success btn-sm">Sửa</a>-->
<!--              <a th:href="@{/products/delete/{id}(id=${product.id})}"-->
<!--                 class="btn btn-danger btn-sm" onclick="return confirm('Bạn có chắc không?')">Xóa</a>-->
<!--          </div>-->
<!--      </td>-->
<!--      <td>-->
<!--          &lt;!&ndash; Nút thêm vào giỏ hàng, hiển thị cho tất cả người dùng đã xác  thực &ndash;&gt;-->
<!--          <form th:action="@{/cart/add}" method="post" sec:authorize="isAuthenticated()">-->
<!--              <input type="number" name="quantity" min="1" value="1" class="form-control d-inline-block" style="width: 70px;">-->
<!--              <input type="hidden" th:value="${product.id}" name="productId"/>-->
<!--              <button type="submit" class="btn btn-warning btn-sm">Thêm Vào Giỏ</button>-->
<!--          </form>-->
<!--      </td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--  </table>-->
<!--    -->

    <!-- Start Product Section -->
    <div class="product-section" style="margin-top:50px;">
        <div class="container">
            <div class="row" >

                <!-- Start Column 2 -->
                <div class="col-12 col-md-4 col-lg-3 mb-5 mb-md-0 shadow-sm p-4" th:each="product : ${products}">
                    <div>
                        <div class="product-item" >
<!--                            <img alt="" src="https://images.unsplash.com/photo-1717131879398-b92a8dc6eaf6?q=80&w=1888&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="img-fluid product-thumbnail rounded-3">-->
                            <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" data-bs-interval="2000">
                                          <ol class="carousel-indicators hidden">
                                          <li th:each="imageUrl, stat : ${product.image}" data-target="#carouselExampleIndicators"
                                              th:attr="data-slide-to=${stat.index}" th:class="${stat.index == 0} ? 'active'">
                                            </li>
                                         </ol>
                                        <div class="carousel-inner" style="height:200px;">
                                             <div th:each="imageUrl, stat : ${product.image}" th:class="${stat.index == 0} ? 'carousel-item active' : 'carousel-item'">
                                                  <img th:src="@{${imageUrl}}" class="d-block img-fluid product-thumbnail rounded-3" alt="product image" style="width:100%; max-height:100%; object-fit:cover;"/>
                                             </div>
                                          </div>
                                        </div>
                            <h3 class="product-title text-decoration-none" th:text="${product.name}">Nordic Chair</h3>
                            <strong class="product-price text-decoration-none" th:text="${product.price}" >$50.00</strong>
                        </div>
                        <div class="d-flex justify-content-between">
                            <div class="d-flex">
                                <a th:href="@{/products/{id}(id=${product.id})}"
                                   class="btn btn-info btn-sm mx-1" >Xem</a>
                                <div sec:authorize="hasAuthority('ADMIN')">
                                    <a th:href="@{/products/edit/{id}(id=${product.id})}"
                                       class="btn btn-success btn-sm">Sửa</a>
                                    <a th:href="@{/products/delete/{id}(id=${product.id})}"
                                       class="btn btn-danger btn-sm" onclick="return confirm('Bạn có chắc không?')">Xóa</a>
                                </div>
                            </div>
                            <form th:action="@{/cart/add}" method="post" sec:authorize="isAuthenticated()">
                                <input type="number" name="quantity" min="1" value="1" class="form-control d-none" style="width: 70px;">
                                <input type="hidden" th:value="${product.id}" name="productId"/>
                                <button type="submit" class="btn btn-warning btn-sm">Thêm</button>
                            </form>
                        </div>

                    </div>
                </div>
                <!-- End Column 2 -->


            </div>
        </div>
    </div>
    <!-- End Product Section -->
</section>

</body>
</html>